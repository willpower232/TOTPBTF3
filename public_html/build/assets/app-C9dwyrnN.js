var p=t=>{throw TypeError(t)};var b=(t,s,e)=>s.has(t)||p("Cannot "+e);var c=(t,s,e)=>(b(t,s,"read from private field"),e?e.call(t):s.get(t)),v=(t,s,e)=>s.has(t)?p("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),f=(t,s,e,i)=>(b(t,s,"write to private field"),i?i.call(t,e):s.set(t,e),e);var h,u,m,L;class y extends HTMLElement{constructor(){super(...arguments);v(this,h);v(this,u);v(this,m);v(this,L)}connectedCallback(){f(this,h,this.querySelector(".a-code")),f(this,u,this.querySelector(".a-timer")),f(this,m,this.getAttribute("refresh-at")),this.setCode(),setInterval(()=>{let e=(30-this.timeLeft())/30*100;e>100&&(e=100),c(this,u).style.setProperty("--progress",e)},20),typeof document.addEventListener<"u"&&document.hidden!==void 0&&document.addEventListener("visibilitychange",()=>{document.hidden?clearTimeout(c(this,L)):this.setCode()})}doReload(){const e=document.querySelector("code-and-timer");navigator.onLine?(removeEventListener("online",e.doReload),fetch(location,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(i=>i.json()).then(i=>{e.setCode(i.code,i.refreshat)})):(c(e,h).innerText="offline",addEventListener("online",e.doReload))}timeLeft(){return c(this,m)-Date.now()/1e3}setCode(e,i){e&&i&&(c(this,h).innerText=e,f(this,m,i)),f(this,L,setTimeout(this.doReload,(this.timeLeft()+1)*1e3)),c(this,u).classList.add("show")}}h=new WeakMap,u=new WeakMap,m=new WeakMap,L=new WeakMap;customElements.define("code-and-timer",y);window.onload=function(){(function(t,s,e){var i=function(d,r){return(r||e).querySelector(d)||null};e.documentElement.scrollHeight>e.documentElement.clientHeight&&i("body").classList.add("scrollup"),t.onscroll=function(){var d=this.oldScroll>this.scrollY;d?i("body").classList.add("scrollup"):i("body").classList.remove("scrollup"),this.oldScroll=this.scrollY};var o;(o=i('input[name="light_mode"]'))&&"fetch"in t&&(o.removeAttribute("disabled"),o.addEventListener("change",function(d){var r=new FormData;r.append("light_mode",o.checked),fetch("/api/profile/setLightMode",{method:"POST",body:r,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":i('meta[name="csrf-token"]').getAttribute("content")},credentials:"same-origin"}).then(function(n){if(n.ok)return n.json();alert("System error: received "+n.status+" "+n.statusText),o.checked=!o.checked}).catch(function(n){alert("System error: "+n),o.checked=!o.checked}).then(function(n){n.current_state===!0?e.body.parentNode.classList.add("inverted"):n.current_state===!1&&e.body.parentNode.classList.remove("inverted")})}));var a;"clipboard"in s&&(a=i(".js-copy"))&&(a.classList.add("enabled"),a.addEventListener("click",function(d){var r=i(d.target.dataset.copies).innerText;s.clipboard.writeText(r).then(function(){a.classList.add("success")}).catch(function(n){a.classList.add("failure"),console.log(n)}).finally(function(){setTimeout(function(){a.classList.remove("success","failure")},800)})}));var l;(l=i(".breadcrumbs"))&&t.addEventListener("resize",function d(){var r=l.firstElementChild,n=l.lastElementChild,g=l.offsetWidth;return n.offsetLeft+n.offsetWidth>g?l.classList.add("overflowed"):r.offsetLeft>0&&l.classList.remove("overflowed"),d}())})(window,navigator,document)};
